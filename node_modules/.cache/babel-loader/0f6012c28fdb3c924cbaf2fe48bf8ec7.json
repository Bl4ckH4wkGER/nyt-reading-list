{"ast":null,"code":"import _classCallCheck from\"/Users/sven/course2-finalProjectJSCRIPT300A/nyt-reading-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sven/course2-finalProjectJSCRIPT300A/nyt-reading-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sven/course2-finalProjectJSCRIPT300A/nyt-reading-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sven/course2-finalProjectJSCRIPT300A/nyt-reading-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';var BestSellerSearch=/*#__PURE__*/function(_React$Component){_inherits(BestSellerSearch,_React$Component);var _super=_createSuper(BestSellerSearch);function BestSellerSearch(){var _this;_classCallCheck(this,BestSellerSearch);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={genres:[],genresLoading:true,queryDate:'',queryGenre:'',results:[],resultsLoading:true,errorMessage:''};_this.searchForm=function(){return _this.state.genresLoading?/*#__PURE__*/React.createElement(\"div\",{className:\"searchFormLoading\"},\"Loading genres...\"):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Add a date and select a genre in the form below:\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:_this.searchQuery},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"date\"},\"Date: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"date\",name:\"date\",placeholder:\"2020-02-20\",value:_this.state.queryDate,onChange:_this.queryDateEntryChange,required:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"genre\"},\"Genre: \"),/*#__PURE__*/React.createElement(\"select\",{id:\"genre\",name:\"genre\",onChange:_this.queryGenreEntryChange},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Select one\"),_this.state.genres.results.map(function(result){return/*#__PURE__*/React.createElement(\"option\",{key:result.list_name,value:result.list_name_encoded},result.list_name);})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Submit\"})));};_this.queryDateEntryChange=function(e){_this.setState({queryDate:e.target.value});};_this.queryGenreEntryChange=function(e){_this.setState({queryGenre:e.target.value});};_this.searchQuery=function(e){e.preventDefault();fetch(\"https://api.nytimes.com/svc/books/v3/lists/\".concat(_this.state.queryDate,\"/\").concat(_this.state.queryGenre,\".json?api-key=\").concat(process.env.REACT_APP_NYT_API_KEY)).then(function(res){if(res.status===404){throw new Error('No list found for list name and/or date provided.');}else{return res.json();}}).then(function(data){return _this.setState({results:data,errorMessage:'',resultsLoading:false});}).catch(function(error){var errorMessage=error.message;_this.setState({resultsLoading:true,errorMessage:errorMessage});});};_this.searchResults=function(){return _this.state.resultsLoading?/*#__PURE__*/React.createElement(\"div\",{className:\"searchResultsLoading\"},\"Please complete the search above to display a list of results.\"):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{className:\"page-sub-heading\"},\"Results:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"query-info\"},\"Closest possible query for \",_this.state.results.results.list_name,\" is for \",_this.state.results.results.published_date,\".\"),/*#__PURE__*/React.createElement(\"div\",{className:\"search-results\"},_this.state.results.results.books.map(function(book,index){return/*#__PURE__*/React.createElement(\"div\",{key:book.title,id:\"\".concat(_this.state.queryGenre).concat(index),className:\"book-container\"},/*#__PURE__*/React.createElement(\"img\",{className:\"book-image\",src:book.book_image,alt:\"book cover\"}),/*#__PURE__*/React.createElement(\"h3\",{className:\"book-title-author\"},book.title,\" by \",book.author),/*#__PURE__*/React.createElement(\"p\",{className:\"book-description\"},book.description),/*#__PURE__*/React.createElement(\"a\",{className:\"book-amazon-link\",href:book.amazon_product_url,target:\"_blank\",rel:\"noopener noreferrer\"},\"Buy the book on Amazon\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"book-add-button\",id:\"addBtn\".concat(_this.state.queryGenre).concat(index)},\"Add to List\"));})));};return _this;}_createClass(BestSellerSearch,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"https://api.nytimes.com/svc/books/v3//lists/names.json?api-key=\".concat(process.env.REACT_APP_NYT_API_KEY)).then(function(res){return res.json();}).then(function(data){return _this2.setState({genres:data,genresLoading:false});});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{className:\"page-heading\"},\"Bestsellers\"),/*#__PURE__*/React.createElement(\"div\",null,this.searchForm()),/*#__PURE__*/React.createElement(\"div\",{className:\"queryErrorMessage\"},this.state.errorMessage),/*#__PURE__*/React.createElement(\"div\",null,this.searchResults()));}}]);return BestSellerSearch;}(React.Component);export{BestSellerSearch as default};","map":{"version":3,"sources":["/Users/sven/course2-finalProjectJSCRIPT300A/nyt-reading-list/src/bestsellersearch.js"],"names":["React","BestSellerSearch","state","genres","genresLoading","queryDate","queryGenre","results","resultsLoading","errorMessage","searchForm","searchQuery","queryDateEntryChange","queryGenreEntryChange","map","result","list_name","list_name_encoded","e","setState","target","value","preventDefault","fetch","process","env","REACT_APP_NYT_API_KEY","then","res","status","Error","json","data","catch","error","message","searchResults","published_date","books","book","index","title","book_image","author","description","amazon_product_url","Component"],"mappings":"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","sourcesContent":["import React from 'react';\n\nexport default class BestSellerSearch extends React.Component {\n    state = {\n        genres: [],\n        genresLoading: true,\n        queryDate: '',\n        queryGenre: '',\n        results: [],\n        resultsLoading: true,\n        errorMessage: ''\n    };\n\n    componentDidMount() {\n        fetch(`https://api.nytimes.com/svc/books/v3//lists/names.json?api-key=${process.env.REACT_APP_NYT_API_KEY}`)\n        .then(res => res.json())\n        .then(data => this.setState({\n          genres: data,\n          genresLoading: false\n        }));\n    }\n\n    searchForm = () => {\n        return this.state.genresLoading\n        ? <div className='searchFormLoading'>Loading genres...</div>\n        : <div>\n            <h2>Add a date and select a genre in the form below:</h2>\n            <form onSubmit={this.searchQuery}>\n                <label htmlFor=\"date\">Date: </label>\n                <input \n                    type=\"text\"\n                    id=\"date\"\n                    name=\"date\"\n                    placeholder=\"2020-02-20\"\n                    value={this.state.queryDate}\n                    onChange={this.queryDateEntryChange}\n                    required\n                />\n                <br/>\n                <label htmlFor=\"genre\">Genre: </label>\n                <select id=\"genre\" name=\"genre\" onChange={this.queryGenreEntryChange}>\n                    <option value=''>Select one</option>\n                    {this.state.genres.results.map(result =>\n                        <option key={result.list_name} value={result.list_name_encoded}>{result.list_name}</option>\n                    )}\n                </select>\n                <br/>\n                <input type=\"submit\" value=\"Submit\" />\n            </form>\n        </div>\n    }\n\n    queryDateEntryChange = (e) => {\n        this.setState({ queryDate: e.target.value });\n    }\n\n    queryGenreEntryChange = (e) => {\n        this.setState({ queryGenre: e.target.value });\n    }\n\n    searchQuery = (e) => {\n        e.preventDefault();\n        fetch(`https://api.nytimes.com/svc/books/v3/lists/${this.state.queryDate}/${this.state.queryGenre}.json?api-key=${process.env.REACT_APP_NYT_API_KEY}`)\n        .then(res => {\n            if (res.status === 404) {\n                throw new Error('No list found for list name and/or date provided.');\n            } else {\n                return res.json();\n            }\n        })\n        .then(data => this.setState({\n          results: data,\n          errorMessage: '',\n          resultsLoading: false\n        }))\n        .catch(error => {\n            const errorMessage = error.message;\n            this.setState({ resultsLoading: true, errorMessage });\n        });\n    }\n\n    searchResults = () => {\n        return this.state.resultsLoading\n        ? <div className='searchResultsLoading'>Please complete the search above to display a list of results.</div>\n        : <div>\n            <h2 className='page-sub-heading'>Results:</h2>\n            <div className='query-info'>Closest possible query for {this.state.results.results.list_name} is for {this.state.results.results.published_date}.</div>\n            <div className='search-results'>\n                {this.state.results.results.books.map((book, index) => \n                    <div key={book.title} id={`${this.state.queryGenre}${index}`} className='book-container'>\n                        <img className='book-image' src={book.book_image} alt='book cover'/>\n                        <h3 className='book-title-author'>{book.title} by {book.author}</h3>\n                        <p className='book-description'>{book.description}</p>\n                        <a className='book-amazon-link' href={book.amazon_product_url} target=\"_blank\" rel=\"noopener noreferrer\">Buy the book on Amazon</a>\n                        <br/>\n                        <button className='book-add-button' id={`addBtn${this.state.queryGenre}${index}`}>Add to List</button>\n                    </div>\n                )}\n            </div>\n        </div>\n\n    }\n    \n    render(){\n        return(\n            <div>\n                <h1 className='page-heading'>Bestsellers</h1>\n                <div>{this.searchForm()}</div>\n                <div className='queryErrorMessage'>{this.state.errorMessage}</div>\n                <div>{this.searchResults()}</div>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}